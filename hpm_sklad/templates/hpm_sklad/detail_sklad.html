{% load static %}
{% load custom_filters %}

<header>
    <nav class="navbar">
        <div class="navbar-left">
	        {% if not perms.hpm_sklad.change_sklad %}
                <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'update_objednano_sklad' object.evidencni_cislo %}')">Objednáno?</a>    
	        {% endif %}
            {% if perms.hpm_sklad.change_sklad %}            
                <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'update_sklad' object.evidencni_cislo %}')">Úprava</a>       
            {% endif %}
            {% if perms.hpm_sklad.delete_sklad %}  
                <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'delete_sklad' object.evidencni_cislo %}')">Smazání</a>            
            {% endif %}
            {% if perms.hpm_sklad.add_auditlog and perms.hpm_sklad.change_sklad %}  
                <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'receipt_audit_log' object.evidencni_cislo %}')">Příjem</a>
                {% if object.mnozstvi > 0 %}
                    <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'dispatch_audit_log' object.evidencni_cislo %}')">Výdej</a>
                {% endif %}
            {% endif %}
            {% if perms.hpm_sklad.add_varianty %}            
                <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'create_varianty' object.pk %}')">Varianta</a>       
            {% endif %}          
        </div>
    </nav>
</header>

<h3 class="text-center">Detaily skladové položky</h3>
    
<div class="container">
    <table>
        <thead>
            <tr>
                <th>Detaily:</th>
            </tr>
        </thead>          
        <tbody>
            {% for field in detail_item_fields %}
                <tr>
                    <th>{{ field.verbose_name }}</th>
                    <td>{{ object|get_attribute:field.name }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th>Příznaky:</th>
            </tr>
        </thead>
        <tbody>
            {% for field in info_fields %}
                <tr>
                    <th>{{ field.verbose_name }}</th>
                    <td>
                        {% if field.name == 'pod_minimem' %}
			    {{ object.pod_minimem_display }}
                        {% else %}
			    {{ object|get_attribute:field.name }}
			{% endif %}
		    </td>                            
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th>Pro zařízení:</th>
            </tr>
        </thead>        
        <tbody>
            {% if equipment_fields_true %}
                <tr>
                    {% for field in equipment_fields_true %}
                        <td>{{ field.verbose_name }}</td>
                    {% endfor %}                
                </tr>
            {% else %}
                <tr>
                    <td>Žádné konkrétní zařízení.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
    
    <table>
        <thead>
            <tr>
                <th>Varianty:</th>
            </tr>
        </thead>
        <tbody>
            {% if varianty %}
                {% for varianta in varianty %}
                    <tr>
                        <td>{{ varianta.id_dodavatele|truncatechars:20 }}</td>                    
                        <td>{{ varianta.nazev_varianty|truncatechars:40 }}</td>
                        {% if perms.hpm_sklad.update_varianty %}            
                            <td>
                                <a class="nav-item" href="javascript:void(0);" onclick="loadForm('{% url 'update_varianty' varianta.pk %}')">Upravit</a>       
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td>Neexistuje žádná varianta.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    
</div>

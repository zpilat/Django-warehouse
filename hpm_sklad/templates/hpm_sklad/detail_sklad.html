{% load static %}
{% load custom_filters %}

{% include "hpm_sklad/navbar_sklad.html" %}
    
<div class="mt-3">
    <table class="table table-sm table-striped table-bordered">       
        <thead class="thead-dark">
            <tr>
                <th colspan=2 scope="col">Detail položky: {{ sklad.nazev_dilu|truncatechars:50 }}</h6>                
            </tr>
        </thead>            
        <tbody>
            {% for field in detail_item_fields %}
                <tr>
                    <th class="width-nowrap">{{ field.verbose_name }}</th>
                    <td class="container-fluid">{{ object|get_attribute:field.name }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <table class="table table-sm table-bordered container-fluid">
        <tbody>
            <tr>
                {% for field in info_fields %}
                    <th>{{ field.verbose_name }}</th>
                    {% if field.name == 'pod_minimem' %}
                        <td>
                            {{ object.pod_minimem_display }}
                        </td>
                    {% else %}
                        <td>
                            {{ object|get_attribute:field.name }}
                        </td>
                        <td></td>
                    {% endif %}          
                {% endfor %}
            </tr>
        </tbody>
    </table>

    <table class="table table-sm table-bordered">    
        <tbody>
            {% if equipment_fields_true %}
                <tr>
                    <th>Pro zařízení</th>
                    {% for field in equipment_fields_true %}
                        <td>{{ field.verbose_name }}</td>
                    {% endfor %}
                </tr>
            {% else %}
                <tr>
                    <th>Pro zařízení</th>
                    <td>Žádné konkrétní zařízení.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
    <hr>
    <table class="table table-sm table-striped table-bordered">
        <thead class="thead-dark">
            <tr>
                <th colspan=3 scope="col">Varianty položky: {{ sklad.nazev_dilu|truncatechars:50 }}</h6>                
            </tr>
        </thead>     
        <tbody>
            {% if varianty %}
                {% for varianta in varianty %}
                    <tr>
                        <td class="width-nowrap">{{ varianta.id_dodavatele|truncatechars:20 }}</td>                    
                        <td class="container-fluid">{{ varianta.nazev_varianty|truncatechars:40 }}</td>
                        {% if perms.hpm_sklad.update_varianty %}            
                            <td>
                                <a class="btn btn-outline-dark btn-xs rounded-pill" href="javascript:void(0);" onclick="loadForm('{% url 'update_varianty' varianta.pk %}')">Upravit</a>       
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td>Neexistuje žádná varianta.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
